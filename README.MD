# DS2API

[![License](https://img.shields.io/github/license/CJackHwang/ds2api.svg)](LICENSE)
![Stars](https://img.shields.io/github/stars/CJackHwang/ds2api.svg)
![Forks](https://img.shields.io/github/forks/CJackHwang/ds2api.svg)
[![Version](https://img.shields.io/badge/version-1.6.11-blue.svg)](version.txt)
[![Docker](https://img.shields.io/badge/docker-ready-blue.svg)](DEPLOY.md#docker-éƒ¨ç½²æ¨è)

è¯­è¨€ / Language: [ä¸­æ–‡](README.MD) | [English](README.en.md)

å°† DeepSeek å…è´¹å¯¹è¯ç‰ˆè½¬æ¢ä¸º **OpenAI & Claude å…¼å®¹ API**ï¼Œæ”¯æŒå¤šè´¦å·è½®è¯¢ã€è‡ªåŠ¨ Token åˆ·æ–°ã€å¯è§†åŒ–ç®¡ç†ç•Œé¢ã€‚

![p1](https://github.com/user-attachments/assets/07296a50-50d4-4f05-a9e5-280df14e9532)
![p2](https://github.com/user-attachments/assets/03b4a763-766f-4050-aea8-1a183e70ae6a)
![p3](https://github.com/user-attachments/assets/fc8b9836-11e3-4c38-a684-eb2c79b80fe9)
![p4](https://github.com/user-attachments/assets/513e9ca7-aa9e-45a6-8f7e-f362b1650675)



## âœ¨ ç‰¹æ€§

- ğŸ”„ **åŒåè®®å…¼å®¹** - åŒæ—¶æ”¯æŒ OpenAI å’Œ Claude (Anthropic) API æ ¼å¼
- ğŸš€ **å¤šè´¦å·è½®è¯¢** - Round-Robin è´Ÿè½½å‡è¡¡ï¼Œæ”¯æŒé«˜å¹¶å‘åœºæ™¯
- ğŸ” **Token è‡ªåŠ¨åˆ·æ–°** - è¿‡æœŸè‡ªåŠ¨é‡æ–°ç™»å½•ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤
- ğŸŒ **WebUI ç®¡ç†** - å¯è§†åŒ–æ·»åŠ è´¦å·ã€æµ‹è¯• APIã€åŒæ­¥ Vercel é…ç½®
- ğŸŒ **å¤šè¯­è¨€åˆ‡æ¢** - WebUI å†…ç½®ä¸­è‹±åŒè¯­ï¼Œå¯éšæ—¶åˆ‡æ¢
- ğŸ” **è”ç½‘æœç´¢** - æ”¯æŒ DeepSeek åŸç”Ÿæœç´¢å¢å¼ºæ¨¡å¼
- ğŸ§  **æ·±åº¦æ€è€ƒ** - æ”¯æŒæ¨ç†æ¨¡å¼ï¼Œè¾“å‡ºæ€è€ƒè¿‡ç¨‹
- ğŸ› ï¸ **å·¥å…·è°ƒç”¨** - å…¼å®¹ OpenAI Function Calling æ ¼å¼
- â˜ï¸ **Vercel ä¸€é”®éƒ¨ç½²** - æ— éœ€æœåŠ¡å™¨ï¼Œå¿«é€Ÿä¸Šçº¿

## ğŸ“‹ æ¨¡å‹æ”¯æŒ

### OpenAI å…¼å®¹æ¥å£ (`/v1/chat/completions`)

| æ¨¡å‹ | æ·±åº¦æ€è€ƒ | è”ç½‘æœç´¢ | è¯´æ˜ |
|-----|:--------:|:--------:|------|
| `deepseek-chat` | âŒ | âŒ | æ ‡å‡†å¯¹è¯æ¨¡å¼ |
| `deepseek-reasoner` | âœ… | âŒ | æ¨ç†æ¨¡å¼ï¼ˆè¾“å‡ºæ€è€ƒè¿‡ç¨‹ï¼‰ |
| `deepseek-chat-search` | âŒ | âœ… | è”ç½‘æœç´¢æ¨¡å¼ |
| `deepseek-reasoner-search` | âœ… | âœ… | æ¨ç† + è”ç½‘æœç´¢ |

### Claude å…¼å®¹æ¥å£ (`/anthropic/v1/messages`)

| æ¨¡å‹ | è¯´æ˜ |
|-----|------|
| `claude-sonnet-4-20250514` | æ˜ å°„åˆ° deepseek-chatï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰ |
| `claude-sonnet-4-20250514-fast` | æ˜ å°„åˆ° deepseek-chatï¼ˆå¿«é€Ÿæ¨¡å¼ï¼‰ |
| `claude-sonnet-4-20250514-slow` | æ˜ å°„åˆ° deepseek-reasonerï¼ˆæ¨ç†æ¨¡å¼ï¼‰ |

> **æç¤º**ï¼šClaude æ¥å£å®é™…è°ƒç”¨çš„æ˜¯ DeepSeekï¼Œå“åº”æ ¼å¼ä¼šè‡ªåŠ¨è½¬æ¢ä¸º Anthropic æ ‡å‡†æ ¼å¼ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šVercel éƒ¨ç½²ï¼ˆæ¨èï¼‰

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2FCJackHwang%2Fds2api&env=DS2API_ADMIN_KEY&envDescription=ç®¡ç†é¢æ¿è®¿é—®å¯†ç ï¼ˆå¿…å¡«ï¼‰&envLink=https%3A%2F%2Fgithub.com%2FCJackHwang%2Fds2api%23ç¯å¢ƒå˜é‡&project-name=ds2api&repository-name=ds2api)

1. ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ï¼Œè®¾ç½®ç®¡ç†å¯†ç  `DS2API_ADMIN_KEY`
2. éƒ¨ç½²å®Œæˆåè®¿é—® `/admin` ç®¡ç†ç•Œé¢
3. æ·»åŠ  DeepSeek è´¦å·å’Œè‡ªå®šä¹‰ API Key
4. ç‚¹å‡»ã€ŒåŒæ­¥åˆ° Vercelã€ä¿å­˜é…ç½®

> **é¦–æ¬¡åŒæ­¥ä¼šè‡ªåŠ¨éªŒè¯è´¦å·å¹¶ä¿å­˜ Tokenï¼Œåç»­æ“ä½œæ— éœ€é‡å¤è¾“å…¥å‡­è¯ã€‚**

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/CJackHwang/ds2api.git
cd ds2api

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. é…ç½®è´¦å·
cp config.example.json config.json
# ç¼–è¾‘ config.jsonï¼Œæ·»åŠ  DeepSeek è´¦å·ä¿¡æ¯

# 4. å¯åŠ¨æœåŠ¡
python dev.py
```

æœåŠ¡å¯åŠ¨åè®¿é—® `http://localhost:5001`

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | å¿…å¡« |
|-----|------|:----:|
| `DS2API_ADMIN_KEY` | ç®¡ç†é¢æ¿å¯†ç  | Vercel å¿…å¡« |
| `DS2API_CONFIG_JSON` | é…ç½® JSON æˆ– Base64 ç¼–ç  | å¯é€‰ |
| `VERCEL_TOKEN` | Vercel API Tokenï¼ˆç”¨äºåŒæ­¥ï¼‰ | å¯é€‰ |
| `VERCEL_PROJECT_ID` | Vercel é¡¹ç›® ID | å¯é€‰ |
| `PORT` | æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤ 5001ï¼‰ | å¯é€‰ |

### é…ç½®æ–‡ä»¶æ ¼å¼ (`config.json`)

```json
{
  "keys": ["your-api-key-1", "your-api-key-2"],
  "accounts": [
    {
      "email": "user@example.com",
      "password": "your-password",
      "token": ""
    },
    {
      "mobile": "12345678901",
      "password": "your-password",
      "token": ""
    }
  ]
}
```

> **è¯´æ˜**ï¼š
> - `keys`: è‡ªå®šä¹‰çš„ API å¯†é’¥ï¼Œç”¨äºè°ƒç”¨æœ¬æœåŠ¡
> - `accounts`: DeepSeek ç½‘é¡µç‰ˆè´¦å·ï¼Œæ”¯æŒé‚®ç®±æˆ–æ‰‹æœºå·ç™»å½•
> - `token`: ç•™ç©ºå³å¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è·å–å¹¶åˆ·æ–°

## ğŸ“¡ API ä½¿ç”¨

å®Œæ•´ API æ–‡æ¡£è¯·å‚é˜… **[API.md](API.md)**

### å¿«é€Ÿç¤ºä¾‹

**è·å–æ¨¡å‹åˆ—è¡¨**ï¼š
```bash
curl http://localhost:5001/v1/models
```

**OpenAI æ ¼å¼è°ƒç”¨**ï¼š
```bash
curl http://localhost:5001/v1/chat/completions \
  -H "Authorization: Bearer your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "deepseek-chat",
    "messages": [{"role": "user", "content": "ä½ å¥½"}],
    "stream": true
  }'
```

**Claude æ ¼å¼è°ƒç”¨**ï¼š
```bash
curl http://localhost:5001/anthropic/v1/messages \
  -H "x-api-key: your-api-key" \
  -H "Content-Type: application/json" \
  -H "anthropic-version: 2023-06-01" \
  -d '{
    "model": "claude-sonnet-4-20250514",
    "max_tokens": 1024,
    "messages": [{"role": "user", "content": "ä½ å¥½"}]
  }'
```

### Python SDK ä½¿ç”¨

```python
from openai import OpenAI

client = OpenAI(
    api_key="your-api-key",
    base_url="http://localhost:5001/v1"
)

response = client.chat.completions.create(
    model="deepseek-reasoner",
    messages=[{"role": "user", "content": "è¯·è§£é‡Šé‡å­çº ç¼ "}],
    stream=True
)

for chunk in response:
    if chunk.choices[0].delta.content:
        print(chunk.choices[0].delta.content, end="")
```

## ğŸ”§ éƒ¨ç½²é…ç½®

### Nginx åå‘ä»£ç†

```nginx
location / {
    proxy_pass http://localhost:5001;
    proxy_http_version 1.1;
    proxy_set_header Connection "";
    proxy_buffering off;
    proxy_cache off;
    chunked_transfer_encoding on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 120;
}
```

### æ–¹å¼ä¸‰ï¼šDocker éƒ¨ç½²

```bash
# 1. å…‹éš†ä»“åº“å¹¶è¿›å…¥ç›®å½•
git clone https://github.com/CJackHwang/ds2api.git
cd ds2api

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .envï¼Œå¡«å†™ DS2API_ADMIN_KEY å’Œ DS2API_CONFIG_JSON

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

> **Docker ä¼˜åŠ¿**ï¼šé›¶ä¾µå…¥è®¾è®¡ï¼Œä¸»ä»£ç æ›´æ–°åªéœ€ `docker-compose up -d --build`ï¼Œæ— éœ€ä¿®æ”¹ Docker é…ç½®ã€‚è¯¦è§ [DEPLOY.md](DEPLOY.md#docker-éƒ¨ç½²æ¨è)ã€‚

## âš ï¸ å…è´£å£°æ˜

**æœ¬é¡¹ç›®åŸºäºé€†å‘å·¥ç¨‹å®ç°ï¼ŒæœåŠ¡ç¨³å®šæ€§æ— æ³•ä¿è¯ã€‚**

- ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œ**ç¦æ­¢å•†ä¸šç”¨é€”æˆ–å¯¹å¤–æä¾›æœåŠ¡**
- å»ºè®®æ­£å¼é¡¹ç›®ä½¿ç”¨ [DeepSeek å®˜æ–¹ API](https://platform.deepseek.com/)
- ä½¿ç”¨æœ¬é¡¹ç›®äº§ç”Ÿçš„ä»»ä½•é£é™©ç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…

## ğŸ“œ é¸£è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [iidamie/deepseek2api](https://github.com/iidamie/deepseek2api)
- [LLM-Red-Team/deepseek-free-api](https://github.com/LLM-Red-Team/deepseek-free-api)

## ğŸ“Š Star History

[![Star History Chart](https://api.star-history.com/svg?repos=CJackHwang/ds2api&type=Date)](https://star-history.com/#CJackHwang/ds2api&Date)
